datasource db {
    provider = "postgresql"
    url      = env("DATABASE_URL")
}

generator client {
    provider = "prisma-client-js"
}

generator pothos {
    provider = "prisma-pothos-types"
}

model Pokemon {
    id              String         @id @default(cuid())
    number          String         @unique
    name            String
    weightMin       String?
    weightMax       String?
    heightMin       String?
    heightMax       String?
    classification  String?
    types           String
    resistant       String
    attacks         PokemonAttack?
    weaknesses      String
    fleeRate        Float?
    maxCP           Int?
    evolutions      Pokemon[]      @relation("PokemonToPokemon")
    evolvedFrom     Pokemon?       @relation("PokemonToPokemon", fields: [evolvedFromId], references: [id])
    evolvedFromId   String?
    evolutionAmount Int?
    evolutionName   String?
    maxHP           Int?
    image           String
    tierlists       Tierlist[]
    tiers           Tier[]
    templates       Template[]
}

model PokemonAttack {
    id        String   @id @default(cuid())
    pokemon   Pokemon  @relation(fields: [pokemonId], references: [id])
    pokemonId String   @unique
    fast      Attack[] @relation("FastAttacks")
    special   Attack[] @relation("SpecialAttacks")
}

model Attack {
    id                    String          @id @default(cuid())
    fastPokemonAttacks    PokemonAttack[] @relation("FastAttacks")
    specialPokemonAttacks PokemonAttack[] @relation("SpecialAttacks")
    name                  String
    type                  String
    damage                Int?
}

model Tierlist {
    id       String    @id @default(cuid())
    title    String
    pokemons Pokemon[]
    tiers    Tier[]
}

model Template {
    id       String    @id @default(cuid())
    title    String
    pokemons Pokemon[]
    tiers    String[]
}

model Tier {
    id         Int       @id @default(autoincrement())
    title      String
    tierlist   Tierlist? @relation(fields: [tierlistId], references: [id])
    tierlistId String?
    pokemons   Pokemon[]
}
